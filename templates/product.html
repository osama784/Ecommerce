{% extends 'main.html'%}
{% load static %}

{% block head %}
<title>Product</title>
{% endblock head %}

{% block content %}
{% include 'partials/navbar.html' with chosen='shop'%}
{% url 'products:shop' as parent_page_url %}
{% include 'partials/path.html' with parent_page_name="Category_name" page_name="product_name" parent_page_url=parent_page_url%}

<div class="grid grid-cols-12 gap-4 container mx-auto my-5 px-4 max-w-[1270px]"
    x-data="{currentImage: { 'url': '{{product.get_display_image}}', 'download_url': '{{product.get_download_url}}' } }"> 
    <div class="space-y-10 sm:space-y-0 sm:grid grid-cols-12 gap-10 col-span-full lg:col-span-8 xl:col-span-9 h-fit"> 
        <div class="sm:col-span-6 flex flex-col gap-5 w-4/6 mx-auto sm:w-auto sm:mx-0 max-[420px]:w-full">
            <div class="h-96 rounded-xl border-2" >
                <img x-bind:src="currentImage.url" alt=""
                    class="rounded-lg size-full object-cover" x-transition>
            </div>
            {% if product.get_attachments %}
            <div class="flex justify-between gap-1 *:rounded-lg *:border h-24 *:cursor-pointer *:w-20">
                {% for attachment in product.get_attachments %}
                <div class="hover:opacity-80 transition-opacity" x-data="{thisImage: {'url': '{{attachment.image.url}}' , 'download_url': '{{attachment.get_download_url}}' } }"
                    x-on:click="tmp=currentImage; currentImage = thisImage; thisImage=tmp">
                    <img x-bind:src="thisImage.url" alt="" class="size-full rounded-lg object-cover" x-transition>
                </div>
                {% endfor%}        
            </div>
            {% endif %}
        </div>
        <div class="flex flex-col gap-5 border rounded-lg p-3 sm:p-0 sm:border-none sm:col-span-6 xl:pr-24">
            <small class="bg-red-200 text-red-500 py-1 px-3 text-sm w-fit rounded-md">-76%</small>
            <p class="font-bold text-3xl">Product Name</p>
            <div class="text-sm flex gap-1 items-center">
                <div class="flex gap-1">
                    <i class="fa-solid fa-star text-yellow-500"></i>
                    <i class="fa-solid fa-star text-yellow-500"></i>
                    <i class="fa-solid fa-star text-yellow-500"></i>
                    <i class="fa-solid fa-star text-yellow-500"></i>
                    <i class="fa-solid fa-star text-yellow-500"></i>
                </div>
                <span class="text-gray-500">reviews(32)</span>
            </div>
            <div class="flex gap-1 items-center">
                <div class="text-green-600 font-bold text-5xl">$15.56</div>
                <div class="flex flex-col items-center">
                    <small class="text-sm text-yellow-500">-76% off</small>
                    <span class="line-through text-gray-500 text-lg pl-3">$29.99</span>
                </div>
            </div>
            <p class="text-gray-800">This is the product.</p>
            <div class="flex flex-col gap-2">
                <input type="number" maxlength="3"
                    class="rounded-lg outline-none border w-fit border-gray-500 px-3 py-5 caret-slate-400">
                <div class="flex gap-2 items-center">
                    <div class="bg-green-500 text-white py-2 px-5 rounded-lg hover:bg-amber-400 transition-colors cursor-pointer"
                        x-data="{addedToCart: false}" x-on:click="addedToCart = true">
                        <div x-show="!addedToCart">
                            <i class="fa-solid fa-cart-shopping"></i>
                            <button>Add To Cart</button>
                        </div>
                        <i class="fa-solid fa-check group-hover:text-white transition-colors" x-show="addedToCart"></i>
                    </div>
                    <div class="rounded-lg py-2 bg-green-500 text-white px-3 cursor-pointer" x-data="{heartHovered: false, heartClicked: false}"
                        x-on:mouseover="heartHovered = true" x-on:mouseleave="heartHovered = false"
                        x-on:click="heartClicked = !heartClicked">
                        <i class="fa-regular fa-heart" x-show="!(heartHovered || heartClicked)" x-transition:enter></i>
                        <i class="fa-solid fa-heart text-red-400" x-show="heartHovered || heartClicked"></i>
                    </div>
                </div>
            </div>
            
            <div class="flex text-sm justify-between mt-auto">
                <div>
                    <p>Type: <span class="text-green-500">Organic</span></p>
                    <p>LIFE: <span class="text-green-500">100 days</span></p>
                </div>
                <div>
                    <p>STOCK: <span class="text-green-500">10 items</span></p>
                    <p class="text-green-500 underline"><a x-bind:href="currentImage.download_url">Download</a></p>
                </div>
            </div>
        </div>
        <div class="p-7 flex flex-col gap-8 col-span-full rounded-xl border" x-data="{openedIndex: 0}">
            <div class="flex gap-3 *:p-2 *:border *:rounded-xl flex-wrap font-medium">
                <h3 class="hover:text-green-500 hover:-translate-y-1 transition-all cursor-pointer"
                    @click="openedIndex = 0" x-bind:class="openedIndex == 0 && 'text-green-500' ">Description</h3>
                <h3 class="hover:text-green-500 hover:-translate-y-1 transition-all cursor-pointer"
                    @click="openedIndex = 1" x-bind:class="openedIndex == 1 && 'text-green-500' ">Additional info</h3>
                <h3 class="hover:text-green-500 hover:-translate-y-1 transition-all cursor-pointer"
                    @click="openedIndex = 2" x-bind:class="openedIndex == 2 && 'text-green-500' ">Vendor</h3>
                <h3 class="hover:text-green-500 hover:-translate-y-1 transition-all cursor-pointer"
                    @click="openedIndex = 3" x-bind:class="openedIndex == 3 && 'text-green-500' ">Reviews(0)</h3>
            </div>
            <div>
                <div x-show="openedIndex == 0" x-transition:enter x-transition:enter.duration.500ms>
                    <p>This is the product.</p>
                </div>
                <div x-show="openedIndex == 1" x-transition:enter x-transition:enter.duration.500ms>
                    <p>There are no additional info.</p>
                </div>
                <div class="flex-col gap-1" x-show="openedIndex == 2" x-transition:enter
                    x-transition:enter.duration.500ms>
                    <h1 class="font-bold text-black text-2xl ">Vendor</h1>
                    <div class="flex h-36 gap-2 w-fit items-center self-center">
                        <div class="rounded-full w-fit h-fit overflow-hidden mt-10">
                            <img src="{% static 'images/nature-food.png'%}" alt="" class="object-cover size-32">
                        </div>
                        <div class="flex flex-col gap-2">
                            <span class="text-green-500">Nestify</span>
                            <div class="flex gap-1 pl-5">
                                <i class="fa-solid fa-star text-yellow-500"></i>
                                <i class="fa-solid fa-star text-yellow-500"></i>
                                <i class="fa-solid fa-star text-yellow-500"></i>
                                <i class="fa-solid fa-star text-yellow-500"></i>
                                <i class="fa-solid fa-star text-yellow-500"></i>
                            </div>
                            <span class="text-gray-500 pl-12">reviews(32)</span>
                        </div>
                    </div>
                    <div class="mt-16">
                        <p class="flex gap-3 items-center"><i
                                class="fa-solid fa-location-dot text-green-700"></i><span>Address: 123 Main
                                Street</span></p>
                        <p class="flex gap-2 items-center"><i
                                class="fa-solid fa-headset text-green-700"></i><span>Contact Seller:
                                +124(456)789</span></p>
                    </div>
                    <hr class="border-gray-400 mt-5">
                    <div class="flex gap-2 justify-between mt-5 xl:w-4/6 xl:self-center">
                        <div class="flex flex-col gap-2 items-center">
                            <small class="text-green-600">Rating</small>
                            <strong class="font-bold text-3xl">92%</strong>
                        </div>
                        <div class="flex flex-col gap-2 items-center">
                            <small class="text-green-600">Snip on time</small>
                            <strong class="font-bold text-3xl">100%</strong>
                        </div>
                        <div class="flex flex-col gap-2 items-center">
                            <small class="text-green-600">Chat reponse</small>
                            <strong class="font-bold text-3xl">100%</strong>
                        </div>
                    </div>
                </div>
                <div class="flex gap-x-3 gap-y-10 flex-col xl:flex-row" x-show="openedIndex == 3" x-transition:enter
                    x-transition:enter.duration.500ms>
                    <div class="flex flex-col gap-5 xl:w-7/12">
                        <div>
                            <h3 class="font-medium">Customer Quastions & answers</h3>
                            <div class="flex flex-col gap-2">
                                <div class="flex flex-col gap-2 *:rounded *:border *:p-2">
                                    <div>
                                        <small>Username</small>
                                        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Similique saepe
                                            esse.</p>
                                    </div>
                                    <div>
                                        <small>Username</small>
                                        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Similique saepe
                                            esse.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% if request.user.is_authenticated %}
                        <div id="add-comment" class="grow flex flex-col gap-2">
                            <h3 class="font-medium">Add a Review</h3>
                            <textarea name="" id="" class="rounded-lg border p-2 w-full h-56"></textarea>
                            <select name="" id="" class="font-[FontAwesome] p-3 rounded-lg border w-fit">
                                <option value="">
                                    &#xf005;

                                </option>
                                <option value="">
                                    &#xf005;
                                    &#xf005;
                                </option>
                                <option value="">
                                    &#xf005;
                                    &#xf005;
                                    &#xf005;
                                </option>
                                <option value="">
                                    &#xf005;
                                    &#xf005;
                                    &#xf005;
                                    &#xf005;
                                </option>
                                <option value="">
                                    &#xf005;
                                    &#xf005;
                                    &#xf005;
                                    &#xf005;
                                    &#xf005;
                                </option>
                            </select>
                            <div class="w-full">
                                <button
                                    class="p-2 bg-green-500 text-white rounded-lg hover:bg-amber-400 transition-colors">Submit
                                    Review</button>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <div class="flex flex-col gap-3 xl:w-5/12 ">
                        <div class="font-medium">
                            <h3>Customer Quastions & answers</h3>
                            <small>out of 5.0</small>
                        </div>
                        <div class="flex flex-col gap-3 *:flex *:gap-3">
                            <div>
                                <span>5 star</span>
                                <div
                                    class="grow bg-slate-300 rounded-lg before:bg-yellow-400 before:w-4/5 before:h-full before:rounded-s-lg before:block ">
                                </div>
                            </div>
                            <div>
                                <span>4 star</span>
                                <div
                                    class="grow bg-slate-300 rounded-lg before:bg-yellow-400 before:w-3/5 before:h-full before:rounded-s-lg before:block ">
                                </div>
                            </div>
                            <div>
                                <span>3 star</span>
                                <div
                                    class="grow bg-slate-300 rounded-lg before:bg-yellow-400 before:w-1/5 before:h-full before:rounded-s-lg before:block ">
                                </div>
                            </div>
                            <div>
                                <span>2 star</span>
                                <div
                                    class="grow bg-slate-300 rounded-lg before:bg-yellow-400 before:w-2/5 before:h-full before:rounded-s-lg before:block ">
                                </div>
                            </div>
                            <div>
                                <span>1 star</span>
                                <div
                                    class="grow bg-slate-300 rounded-lg before:bg-yellow-400 before:w-full before:h-full before:rounded-lg before:block ">
                                </div>
                            </div>
                        </div>
                        <p class="text-gray-500">Here are the ratings calculated</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="hidden lg:grid grid-cols-12 gap-y-5 col-span-full ">
            <div class="rounded-lg col-span-full flex flex-col gap-y-4">
                <h1 class="text-3xl max-[360px]:text-xl">Related Prducts</h1>
                <hr class="border">
                <div class="grid max-[430px]:grid-cols-2 grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-3">
                    {% for current_product in products %}
                        {% include 'partials/product-partial.html' with product=current_product %}
                    {% endfor %}
                    <!-- <div
                        class="border rounded-xl flex flex-col gap-1 relative px-2 py-2 col-span-2 transition-all hover:shadow hover:border-gray-500">
                        <span
                            class="absolute w-16 h-6 text-center content-center text-sm bg-pink-500 text-white top-0 left-0 rounded-ss-xl rounded-ee-xl z-50">-40%</span>
                        <div class="w-full border h-56 rounded-lg group realtive overflow-hidden">
                            <img src="{% static 'images/cake.jpg'%}" alt=""
                                class="object-cover size-full transition-transform duration-500 group-hover:scale-125">
                            <div
                                class="opacity-0 absolute gap-1 group-hover:opacity-100 flex rounded transition-opacity p-1 top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-gray-50 text-green-700 *:cursor-pointer">
                                <div class=" border-r pr-1"><i class="fa-regular fa-heart"></i></div>
                                <div><i class="fa-solid fa-circle-info"></i></div>
                            </div>
                        </div>
                        <small class="text-gray-500 text-xs">Food</small>
                        <strong class="font-bold h-12 line-clamp-2">Red Velvet Cakes</strong>
                        <span><i class="fa-solid fa-star text-yellow-500 mr-1"></i>(0)</span>
                        <p class="text-sm">
                            By <a href="" class="text-green-500">NestFOOD</a>
                        </p>
                        <div class="flex justify-between items-center mt-3">
                            <span class="text-green-600 font-bold">$ 88.93</span>
                            <div class="flex items-center gap-2">
                                <div
                                    class="bg-green-200 hover:bg-green-500 group cursor-pointer transition-colors px-2 py-1 rounded">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                    <button class="group-hover:text-white">Add</button>
                                </div>
                                <i class="fa-regular fa-heart"></i>
                            </div>
                        </div>
                        <small class="line-through text-gray-500 text-sm ml-2">$200.99</small>
                    </div>
                    <div class="border rounded-md flex flex-col gap-1 relative px-2 py-2 col-span-2">
                        <span class="absolute"></span>
                        <div class="w-full border h-56 bg-cover bg-left bg-no-repeat rounded-lg" style="
                      background-image: url(../static/images/spatchcock-bbq-chicken.jpg);
                    ">

                        </div>
                        <small class="text-gray-500 text-xs">Food</small>
                        <strong class="font-bold">Spatchcock BBQ Chicken</strong>
                        <span><i class="fa-solid fa-star text-yellow-500 mr-1"></i>(0)</span>
                        <p class="text-sm">By <a href="" class="text-green-500">XFOOD</a></p>
                        <div class="flex justify-between items-center mt-3">
                            <span class="text-green-600 font-bold">$ 10.93</span>
                            <div class="flex items-center gap-2">
                                <div class="bg-green-200 px-2 py-1 rounded">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                    <button class="">Add</button>
                                </div>
                                <i class="fa-regular fa-heart"></i>
                            </div>
                        </div>
                        <small class="line-through text-gray-500 text-sm ml-2">$20.99</small>
                    </div>
                    <div class="border rounded-md flex flex-col gap-1 relative px-2 py-2 col-span-2">
                        <span class="absolute"></span>
                        <div class="w-full border h-56 bg-cover bg-left bg-no-repeat rounded-lg" style="
                      background-image: url(../static/images/grilled-bbq-chicken.jpg);
                    ">

                        </div>
                        <small class="text-gray-500 text-xs">Food</small>
                        <strong class="font-bold">Home-made BBQ Grilled Chicken</strong>
                        <span><i class="fa-solid fa-star text-yellow-500 mr-1"></i>(0)</span>
                        <p class="text-sm">
                            By <a href="" class="text-green-500">Nestify</a>
                        </p>
                        <div class="flex justify-between items-center mt-3">
                            <span class="text-green-600 font-bold">$ 10.93</span>
                            <div class="flex items-center gap-2">
                                <div class="bg-green-200 px-2 py-1 rounded">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                    <button class="">Add</button>
                                </div>
                                <i class="fa-regular fa-heart"></i>
                            </div>
                        </div>
                        <small class="line-through text-gray-500 text-sm ml-2">$20.99</small>
                    </div>
                    <div class="border rounded-md flex flex-col gap-1 relative px-2 py-2 col-span-2">
                        <span class="absolute"></span>
                        <div class="w-full border h-56 bg-cover bg-center bg-no-repeat rounded-lg" style="
                      background-image: url(../static/images/double-bief-fried-chicken-bacon.jpg);
                    ">

                        </div>
                        <small class="text-gray-500 text-xs">Food</small>
                        <strong class="font-bold">Double Bief Fried Chicken Bacon</strong>
                        <span><i class="fa-solid fa-star text-yellow-500 mr-1"></i>(0)</span>
                        <p class="text-sm">
                            By <a href="" class="text-green-500">Nestify</a>
                        </p>
                        <div class="flex justify-between items-center mt-3">
                            <span class="text-green-600 font-bold">$ 10.93</span>
                            <div class="flex items-center gap-2">
                                <div class="bg-green-200 px-2 py-1 rounded">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                    <button class="">Add</button>
                                </div>
                                <i class="fa-regular fa-heart"></i>
                            </div>
                        </div>
                        <small class="line-through text-gray-500 text-sm ml-2">$20.99</small>
                    </div>
                    <div class="border rounded-md flex flex-col gap-1 relative px-2 py-2 col-span-2">
                        <span class="absolute"></span>
                        <div class="w-full border h-56 bg-cover bg-left bg-no-repeat rounded-lg" style="
                      background-image: url(../static/images/spatchcock-bbq-chicken.jpg);
                    ">
                        </div>
                        <small class="text-gray-500 text-xs">Food</small>
                        <strong class="font-bold">Spatchcock BBQ Chicken</strong>
                        <span><i class="fa-solid fa-star text-yellow-500 mr-1"></i>(0)</span>
                        <p class="text-sm">By <a href="" class="text-green-500">XFOOD</a></p>
                        <div class="flex justify-between items-center mt-3">
                            <span class="text-green-600 font-bold">$ 10.93</span>
                            <div class="flex items-center gap-2">
                                <div class="bg-green-200 px-2 py-1 rounded">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                    <button class="">Add</button>
                                </div>
                                <i class="fa-regular fa-heart"></i>
                            </div>
                        </div>
                        <small class="line-through text-gray-500 text-sm ml-2">$20.99</small>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
    <div class="sticky top-20 col-span-full lg:col-span-4 xl:col-span-3 h-fit flex flex-col sm:flex-row lg:flex-col items-center justify-between gap-x-10 gap-y-5 max-w-[730px] mx-auto">
        <div class="rounded-lg shadow-md border flex flex-col gap-1 col-span-full p-3 pb-10 px-5 bg-slate-200 h-fit">
            <h1 class="font-bold text-black text-2xl">Delivery</h1>
            <p class="text-green-400"><i class="fa-solid fa-location-dot"></i></p>
            <p class="flex justify-between mt-5"><span class="text-red-500">unverefied location</span><a href=""
                    class="text-green-600">Change</a></p>
            <hr class="border-gray-400 mt-5">
            <h1 class="font-bold text-black text-2xl my-3">Return & Warranty</h1>
            <p class="flex gap-1 items-center"><i class="fa-solid fa-shield-heart text-green-700"></i><span>100 Days
                    Authentic</span></p>
            <p class="flex gap-1 items-center"><i class="fa-solid fa-rotate-left text-green-700"></i><span>100 Days
                    Return</span></p>
            <p class="flex gap-1 items-center"><i class="fa-solid fa-medal text-green-700"></i><span>100 Months
                    Warranty</span></p>
        </div>
        <div class="rounded-lg shadow-md border flex flex-col gap-1 col-span-full p-3 pb-10 px-5 bg-slate-200 h-fit">
            <h1 class="font-bold text-black text-2xl ">Vendor</h1>
            <div class="flex h-36 gap-2 w-fit items-center self-center">
                <div class="rounded-full w-fit h-fit overflow-hidden mt-10">
                    <img src="{% static 'images/nature-food.png'%}" alt="" class="object-cover size-32">
                </div>
                <div class="flex flex-col gap-2">
                    <span class="text-green-500">Nestify</span>
                    <div class="flex gap-1 pl-5">
                        <i class="fa-solid fa-star text-yellow-500"></i>
                        <i class="fa-solid fa-star text-yellow-500"></i>
                        <i class="fa-solid fa-star text-yellow-500"></i>
                        <i class="fa-solid fa-star text-yellow-500"></i>
                        <i class="fa-solid fa-star text-yellow-500"></i>
                    </div>
                    <span class="text-gray-500 pl-12">reviews(32)</span>
                </div>
            </div>
            <div class="mt-16">
                <p class="flex gap-3 items-center"><i
                        class="fa-solid fa-location-dot text-green-700"></i><span>Address:
                        123 Main Street</span></p>
                <p class="flex gap-2 items-center"><i class="fa-solid fa-headset text-green-700"></i><span>Contact
                        Seller: +124(456)789</span></p>
            </div>
            <hr class="border-gray-400 mt-5">
            <div class="flex gap-2 justify-between mt-5">
                <div class="flex flex-col gap-2 items-center">
                    <small class="text-green-600">Rating</small>
                    <strong class="font-bold text-3xl">92%</strong>
                </div>
                <div class="flex flex-col gap-2 items-center">
                    <small class="text-green-600">Snip on time</small>
                    <strong class="font-bold text-3xl">100%</strong>
                </div>
                <div class="flex flex-col gap-2 items-center">
                    <small class="text-green-600">Chat reponse</small>
                    <strong class="font-bold text-3xl">100%</strong>
                </div>
            </div>
            <hr class="border-gray-400 mt-5">
            <p class="mt-5">Become A Vendor? <a href="" class="text-green-600">Register Now</a></p>
        </div>
    </div>
</div>

{% include 'partials/footer.html'%}
{% endblock content %}